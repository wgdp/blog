---
import Head from '../components/Head.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import type { Frontmatter } from '../types/Frontmatter';
import { getImageOrDefault } from '../util/image';

const allPosts = await Astro.glob<Frontmatter>('../pages/posts/*.md');
---

<html lang="ja">
    <Head />
    <body class="antialiased bg-white text-nord-0 flex flex-col min-h-screen">
        <Header />
        <main class="container mx-auto flex-grow">
            <div class="mx-auto w-full px-6 xs:px-7 sm:px-10 max-w-screen-lg">
                <div class="flex justify-center my-28">
                    <h1 class="text-7xl text-nord-1 font-normal">Posts</h1>
                </div>
                <div class="text-xl grid grid-cols-2 my-28 leading-relaxed">
                    {allPosts.map((post) =>
                        <a class="mx-2 rounded-xl bg-nord-6 flex flex-col" href={post.url}>
                            <img class="rounded-t-lg" src={getImageOrDefault(post.frontmatter.thumbnail)} alt="サムネイル" />
                            <div class="p-5 flex-grow">
                                <h5 class="mb-2 text-2xl font-bold tracking-tight text-nord-0">{post.frontmatter.title}</h5>
                            </div>
                            <div class="pb-2 pe-3 flex justify-center">
                                <span class="text-sm">{new Date(post.frontmatter.pubDate).toLocaleDateString('ja-JP')}</span>
                            </div>
                        </a>
                    )}
                </div>
            </div>
        </main>
        <Footer />
	</body>
</html>
